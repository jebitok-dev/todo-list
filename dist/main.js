(()=>{"use strict";const e=(document.querySelector("[data-lists]"),document.querySelector("[data-new-list-form]"),document.querySelector("[data-new-list-input]"),document.querySelector("[data-delete-list-button]"),document.querySelector("[data-list-display-container]"),document.querySelector("[data-list-title]"),void document.querySelector("[data-list-count]"));document.querySelector("[data-tasks]"),document.querySelector("#task-template"),document.querySelector("[data-new-task-form]"),document.querySelector("[data-new-task-input]"),document.querySelector("#description"),document.querySelector("[data-clear-complete-tasks-button]");let t=JSON.parse(localStorage.getItem("task.lists"))||[],n=localStorage.getItem("task.selectedListId");const a=document.querySelector("#overlay"),s=document.querySelector(".close"),r=document.querySelector(".add-btn"),o=document.querySelector(".hamburger");let i=!1;function l(){e(),localStorage.setItem("task.lists",JSON.stringify(t)),localStorage.setItem("task.selectedListId",n)}function c(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function d(){const e=document.querySelector(".container h2"),t=document.querySelector("input[type='submit']");i?(s.style.pointerEvents="none",s.style.transform="scale(0)",a.style.opacity=0,i=!1):(e.textContent="Update Task",t.value="Update",s.style.pointerEvents="auto",s.style.transform="scale(1)",a.style.opacity=1,i=!0)}newListForm.addEventListener("submit",(e=>{e.preventDefault();const n=newListInput.value;if(null==n||""===n)return;const a={id:Date.now().toString(),name:newListInput.value,tasks:[]};newListInput.value=null,t.push(a),l()})),newTaskForm.addEventListener("submit",(e=>{e.preventDefault();const a=newTaskInput.value;if("Update Task"===document.querySelector(".container h2").textContent)return;if(null===a||""===a)return;const s={id:Date.now().toString(),name:newTaskInput.value,date:newTaskDate.value,priority:newTaskPriority.value,description:newTaskDescription.value,complete:!1};newTaskInput.value=null,t.find((e=>e.id===n)).tasks.push(s),l()})),deleteListButton.addEventListener("click",(e=>{t=t.filter((e=>e.id!==n)),n=null,l()})),clearCompleteTaskButton.addEventListener("click",(e=>{const a=t.find((e=>e.id===n));n.tasks=a.tasks.filter((e=>!e.complete)),l()})),listsContainer.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(n=e.target.dataset.listId,l())})),tasksContainer.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(t.find((e=>e.id===n)).tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,l())})),r.addEventListener("click",(()=>{newTaskForm.reset(),d(),i?(r.style.background="#d5ba21",r.style.transform="rotate(45deg)"):(r.style.background="transparent",r.style.transform="rotate(0)")})),closeButton.addEventListener("click",(()=>{s.style.transform="scale(0)",a.style.opacity=0,i=!1,r.style.background="transparent",r.style.transform="rotate(0)",i=!1})),o.addEventListener("click",(()=>{document.querySelector("#sidebar").classList.toggle("active"),o.classList.toggle("click")})),function(){c(listsContainer),t.forEach((e=>{const t=document.createElement("li");t.innerText=e.name,t.dataset.listId=e.id,e.id==n&&t.classList.add("active-list"),listsContainer.appendChild(t)}));const e=t.find((e=>e.id===n));null===n?listDisplayContainer.style.display="none":(listDisplayContainer.style.display="",listTitleElement.innerHTML=`<i class='fas fa-tasks'></i> ${n.name}`,function(e){const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";listCountElement.innerText=`${t} ${n} remaining`}(e),c(tasksContainer),function(e){0===e.tasks.length?(listDisplayContainer.style.background="url(./images/table.svg) center no-repeat",listDisplayContainer.style.backgroundSize="35%"):listDisplayContainer.style.background="",e.tasks.forEach((e=>{const t=document.importNode(taskTemplate.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id;const s=document.createElement("br");a.append(e.name,",",e.date,s,e.description);const r=document.createElement("p");r.innerHTML="<i class='far fa-edit'></i>",r.classList.add("edit"),r.addEventListener("click",(()=>function(e,t){d(),newTaskInput.value=e.name,newTaskDate.value=e.date,newTaskPriority.value=e.priority,newTaskDescription.value=e.description,newTaskForm.addEventListener("submit",(()=>{console.log("daw"),e.name=newTaskInput.value,e.date=newTaskDate,e.priority=newTaskPriority.value,e.description=newTaskDescription.value,t.innerHTML=`<span class='checkbox'></span>${e.name}<br>${e.date}<br>${e.description}`,l()}))}(e,a))),t.querySelector(".task").append(r),tasksContainer.appendChild(t)}))}(e),function(e){const t=[...document.querySelectorAll(".todo")],n=[...document.querySelectorAll(".checkbox")];for(let a=0;a<t.length;a++)for(let t=0;t<e.tasks.length;t++)"High"===e.tasks[t].priority?n[t].getElementsByClassName.border="2px solid #96f542":"Medium"===e.tasks[t].priority?n[t].style.border="2px solid #96f542":n[t].style.border="2px solid #f5ad42"}(e))}()})();